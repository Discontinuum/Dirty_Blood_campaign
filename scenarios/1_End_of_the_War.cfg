#textdomain wesnoth-DB

#define TRY_SAY_BY_THIS_RACE RACE MES
	[if]
            	[have_unit]
            		race={RACE}
            	[/have_unit]
            	[then]
            		[message]
            			side=1
            			canrecruit=no
            			race={RACE}
            			message={MES}
            		[/message]
            	[/then]
            	[else]
            		[message]
            			side=1
            			canrecruit=no
            			message={MES}
            		[/message]
            	[/else]
            [/if]
#enddef


[scenario]
    id=1_The_End_of_the_War
    name = _ "Commander of Weaklings"
    random_start_time=no
    experience_modifier=100
    map_data="{~add-ons/Dirty_Blood/maps/1_End_of_the_War.map}"
    victory_when_enemies_defeated=no
    next_scenario=2_Breaking_Tradition
    carryover_percentage=40
    carryover_add=yes
    current_time=2

    {TURNS 32 30 28}
    {SCENARIO_MUSIC "loyalists.ogg"}
    {EXTRA_SCENARIO_MUSIC "knolls.ogg"}
    {WINTER_SCHEDULE}
    {EVENTS_FOR_ABILITIES}

    [story]
        [part]
        story= _"Thirty years ago, Kapou'e Black Eye united the previously quarreling orc clans under his banner. Since then, no one has ever dared to attack this powerful union of clans. The Iron Law of the Supreme Leader quashed any signs of dissent. Season after season, the orcs multiplied. They recovered from the Great War and established new settlements. One gloomy morning, Kapou'e passed away, leaving the union weakened. As the news spread, a taint of suspense and curiosity filled the air."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"The <i>Straight Blades</i> were a mighty clan, recently founded by veterans of Black Eye's army. Their settlement was located southeast of Black Eye's Union, borderering the Barren Plains. Scattered ogre tribes inhabited these lands. Once common raids were halted by Kapou'e, leaving the wild intruders in isolated nomadic clans. Since this respite, orcs were not the only ones growing in strength and number."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"Sensing the death of Kapou'e Black Eye and the accompanying news of the weakened unity, the former scattered and isolated ogre tribes gathered a large horde of immense size and sheer willpower. Thousands of hungry, snarling and hooting ogres rallied up and raided the <i>Straight Blades</i>."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"The orcs fought worthy of their ancestors, but this day the stars aligned in their enemy's favor. The ogres outnumbered and killed all the men. They feasted on the orcish children, and enslaved the remaining women. For three days and three nights, the ogres rampaged through blood-soaked streets."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"On the fourth day, the ogres burnt the settlement and marched back to their steppes. A breeze of carelessness and the ogre's indistinguishable scent happened to lead an orcish clan known as the <i>Cold Bloods</i> their way. The enraged orcs brought vengeance at the tip of their blades."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"The <i>Cold Blood</i> warriors massacred the ogres. They freed the captivated women of the former <i>Straight Blades</i>, accepting them into their own clan."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"As seasons turned, the ogre's onslaught seemed to fade in the orc's memories. But the onslaught shall never be forgotten..."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"One starlit night, a woman's screech resonated under the moonlight. A former captive of the ogres gave birth. A huge, ugly and fearsome child tore open its mother's womb. The entire hut was drenched in blood. This night gave life to a breed of half-ogre-half-orc, a sinister greeting form the past."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"Murmurs filled the clan's settlement, leaving everyone at unease. The chieftain demanded to have the newborn killed, as a sign to the orc's superiority. But an old orc shamaness forbade his mouth. The spirits overwhelmed her mind, leaving her will unstained. The clan had to accept this horrific child, or great misfortune would befall them all."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"Present tribemen's gaze fell upon the shamaness, as if death itself has befallen them. Gritting his teeth, the chieftain agreed to her proposal. He ordered the shamaness to raise the cursed child, for the baby's destiny may be her own fate."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"The abomination of a baby was named 'Moog,' which translates to 'Dirty' in common tongue. Despite tolerance across the orc clan, true acceptance had long gone. Due to his appearence, Moog was called the 'harmful'."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"Supervisied by the orcish shamaness, Moog became larger and stronger than any other orc. Orcish traditions proposed a hierarchy of strength, but the clan's arrogance prevented him from challenging even the weakest of orcs, without a dozen of their brute falling upon him."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"One day, Moog resettled and grew up among goblins. They shared all the humiliation that the wimps were subjected to by the orcs. But Moog himself was no wimp. Sometimes he fought back against orcs, which made him a hero in the other goblins' eyes."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"But Moog didn't want to be a hero of the weak. His inner will wouldn't stop painting his future self. He starved for true power."
        {DB_BIGMAP}
        [/part]
        [part]
        story= _"As Moog grew older, war came to their borders. The <i>Northern Alliance</i> intruded the orc's lands. Without hesitance, the Supreme Leader called upon the Great Horde. All clans rallied within a couple of days. The chief of the <i>Cold Blood</i> clan put Moog in charge of a goblin war band."
        {DB_BIGMAP}
        [/part]
    [/story]

    {DB_TRACK {JOURNEY_01_NEW} }

    [item]
        image="scenery/mine-abandoned.png"
        visible_in_fog=yes
        x=6
        y=4
    [/item]
    [item]
        image="items/orcish-flag.png"
        visible_in_fog=yes
        x=20
        y=13
    [/item]

    [side]
        controller=human
        side=1
        {GOLD 106 93 80}
        {MOOG_HARMFUL_WAR_STATS}
        team_name=bastards
        user_team_name= _ "Cold Blood Bastards"
        recruit=Goblin Spearman,Wolf Rider,Orcish Archer
        color=lightblue
        fog=no
        shroud=no

        [unit]
            id=Goblin_Friend
            type=Goblin Impaler
            facing=s
            profile=portraits/goblins/rouser-2.png
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
            x=20
            y=12
        [/unit]

        [unit]
            id=Goblin_Watcher
            {TYPE_ON_DIFFICULTY "Goblin Impaler" "Goblin Impaler" "Goblin Spearman"}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
            x=25
            y=10
        [/unit]
        [unit]
            {TYPE_ON_DIFFICULTY "Goblin Impaler" "Goblin Spearman" "Goblin Spearman"}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
            x=26
            y=12
        [/unit]
        [unit]
            {TYPE_ON_DIFFICULTY "Goblin Impaler" "Goblin Impaler" "Goblin Spearman"}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
            x=15
            y=15
        [/unit]
        [unit]
            {TYPE_ON_DIFFICULTY "Goblin Impaler" "Goblin Spearman" "Goblin Spearman"}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
            x=16
            y=17
        [/unit]
    [/side]
    [side]
        controller=ai
        side=2
        team_name=bastards
        user_team_name= _ "Cold Blood Warriors"
        color=blue
        no_leader=yes
        hidden=no
        share_vision=no
        {BLACK_FLAG}

        #Gurrack and his veterans

        [unit]
            type="Orcish Warrior"
            x=22
            y=12
            id=guard3
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type="Orcish Warrior"
            x=22
            y=13
            id=guard2
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type="Orcish Warrior"
            x=23
            y=14
            id=guard1
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            name="Gurrak the Chief's Son"
            canrecruit=yes
            profile=portraits/gurrak.png
            facing=nw
            id=Son
            type="Orcish Leader"
            x=23
            y=13
        [/unit]
    [/side]
    [side]
        defeat_condition=never
        controller=ai
        side=3
        {GOLD 200 200 200}
        {INCOME 100 100 100}
        recruit=Spearman,Bowman,Horseman,Cavalryman
        team_name=alliance
        user_team_name= _ "Northern Alliance"
        no_leader=yes
        color=green
        hidden=no
        fog=no
        shroud=no
        {FLAG_VARIANT knalgan}
        {SCENARIO_1_ALLIANCE_AI}
    [/side]
    [side]
        defeat_condition=never
        controller=ai
        side=4
        {GOLD 200 200 200}
        {INCOME 100 100 100}
        recruit=Spearman,Bowman,Horseman,Cavalryman
        team_name=alliance
        user_team_name= _ "Northern Alliance"
        no_leader=yes
        color=purple
        hidden=no
        fog=no
        shroud=no
        {FLAG_VARIANT knalgan}
        {SCENARIO_1_ALLIANCE_AI}
    [/side]

    #prestart event: villages, variables, objectives

    [event]
    name=prestart

        {CAPTURE_VILLAGES_OF_TYPE Rb^Vct,Re^Vct 1 19 13 20}

        [set_variable]
            name=dead_orcs
            value=0
        [/set_variable]
        [set_variable]
            name=gurrak_come
            value=0
        [/set_variable]

        [objectives]
            silent=yes
                [objective]
                    description= _ "Protect the Crossing"
                    condition=win
                [/objective]
                [objective]
                    description= _ "Death of Moog"
                    condition=lose
                [/objective]
                {TURNS_RUN_OUT}
                [gold_carryover]
                    bonus=yes
                    carryover_percentage=40
                [/gold_carryover]
                [note]
                    description=_"In this campaign, Goblin Impalers have additional level-2 advancements."
                [/note]
                [note]
                    description=_"Moog's nature of relentlessness and anger is fueled by killing foes. Each kill increases his damage and decreases all adjacent enemy's damage."
                [/note]
            [/objectives]    
    [/event]

    #start: dialogue, moving Gurrak, prepare to defense

    [event]
    name=start

        [message]
        speaker=Son
        message= _ "Useless wimps! If it was up to me, you would all pile up as meat shields in the front lines to protect our worthy warriors. Be blessed the chief ordered you to guard this crossing, whilst we take care of the real danger."
        [/message]
        [message]
        speaker=Son
        message= _ "I'm going to war, to shed blood like a true orc. Should I spot any of you off duty once I return, I'll tear out your trachea before you even get a chance to squint."
        [/message]

        {MOVE_UNIT id=Son 46 12}
        [kill]
        id=Son
        animation=no
        [/kill]

        {MOVE_UNIT id=guard1 46 12}
        [kill]
        id=guard1
        animation=no
        [/kill]

        {MOVE_UNIT id=guard2 46 12}
        [kill]
        id=guard2
        animation=no
        [/kill]

        {MOVE_UNIT id=guard3 46 12}
        [kill]
        id=guard3
        animation=no
        [/kill]

        [message]
        speaker=Goblin_Friend
        message= _"Ain't mindin' 'is gab, better squattin' in the back than bein' munch for them big dung heaps."
        [/message]
        [message]
        speaker=Goblin_Watcher
        message= _"Spied them Alliance sneaks! They're nosin' about!"
        [/message]

        #north
        [unit]
            id=Scout1
            {TYPE_ON_DIFFICULTY "Cavalryman" "Dragoon" "Dragoon"}
            side=3
            x=44
            y=1
        [/unit]
        [unit]
            type=Cavalryman
            side=3
            x=24
            y=1
        [/unit]

        #south

        [unit]
            id=Scout2
            type=Cavalryman
            side=4
            x=39
            y=22
        [/unit]
        [unit]
            type=Cavalryman
            side=4
            x=45
            y=17
        [/unit]
       
        [scroll_to_unit]
            id=Scout1
        [/scroll_to_unit]
        [delay]
            time=500
        [/delay]
        [scroll_to_unit]
            id=Scout2
        [/scroll_to_unit]
        [delay]
            time=500
        [/delay]

        [message]
        speaker=Bastard
        message= _"Hunt them down, loyal friends. None is going to pass where I plant my feet."
        [/message]
    [/event]

    #Alliance Commanders spawns

    [event]
    name=turn_5

        #side 3 spawn

        [unit]
            side=3
            type="Lieutenant"
            id=Commander1
            canrecruit=yes
            x=46
            y=1
        [/unit]

        [if]
            [have_unit]
                side=1
                x,y=42,2
            [/have_unit]

                [then]
                {MOVE_UNIT id=Commander1 43 2}
                {ANIMATE_ATTACK Commander1 42,2 sword yes}

                [kill]
                    x,y=42,2
                    animate=yes
                [/kill]

                {MOVE_UNIT id=Commander1 42 2}

                {MODIFY_TERRAIN Ke 42 2}
                {MODIFY_TERRAIN Ce 41 2}
                {MODIFY_TERRAIN Ce 41 3}
                {MODIFY_TERRAIN Ce 42 3}

                [unit]
                    side=3
                    ai_special=guardian
                    random_traits=no
                    upkeep=0
                    [modifications]
                    {TRAIT_STRONG}
                    {TRAIT_RESILIENT}
                    [/modifications]
                    id=Guard_3_1
                    type="Halberdier"
                    x=46
                    y=1
                    max_moves=3
                [/unit]

                {MOVE_UNIT id=Guard_3_1 40 2}

                [unit]
                    side=3
                    ai_special=guardian
                    random_traits=no
                    upkeep=0
                    [modifications]
                    {TRAIT_STRONG}
                    {TRAIT_RESILIENT}
                    [/modifications]
                    id=Guard_3_2
                    type="Halberdier"
                    x=46
                    y=1
                    max_moves=3
                [/unit]

                {MOVE_UNIT id=Guard_3_2 41 4}
                [/then]
                [else]

                {MOVE_UNIT id=Commander1 42 2}

                {MODIFY_TERRAIN Ke 42 2}
                {MODIFY_TERRAIN Ce 41 2}
                {MODIFY_TERRAIN Ce 41 3}
                {MODIFY_TERRAIN Ce 42 3}

                [redraw][/redraw]

                [unit]
                    side=3
                    ai_special=guardian
                    random_traits=no
                    upkeep=0
                    [modifications]
                    {TRAIT_STRONG}
                    {TRAIT_RESILIENT}
                    [/modifications]
                    id=Guard_3_1
                    type="Halberdier"
                    x=46
                    y=1
                    max_moves=3
                [/unit]

                {MOVE_UNIT id=Guard_3_1 40 2}

                [unit]
                    side=3
                    ai_special=guardian
                    random_traits=no
                    upkeep=0
                    [modifications]
                    {TRAIT_STRONG}
                    {TRAIT_RESILIENT}
                    [/modifications]
                    id=Guard_3_2
                    type="Halberdier"
                    x=46
                    y=1
                    max_moves=3
                [/unit]
                {MOVE_UNIT id=Guard_3_2 41 4}
                [/else]
        [/if]


        #side 4 spawn

        [unit]
            side=4
            type="Lieutenant"
            id=Commander2
            canrecruit=yes
            x=40
            y=25
        [/unit]

        [if]
            [have_unit]
                side=1
                x,y=39,23
            [/have_unit]

                [then]
                {MOVE_UNIT id=Commander2 39 24}
                {ANIMATE_ATTACK Commander2 39,23 sword yes}

                [kill]
                    x,y=39,23
                    animate=yes
                [/kill]

                {MOVE_UNIT id=Commander2 39 23}
                {MODIFY_TERRAIN Ke^Qhh 39 23}
                {MODIFY_TERRAIN Ce^Qhh 40 22}
                {MODIFY_TERRAIN Ce^Qhh 39 22}
                {MODIFY_TERRAIN Ce^Qhh 38 22}
                [redraw][/redraw]

                [unit]
                    side=4
                    ai_special=guardian
                    random_traits=no
                    upkeep=0
                    [modifications]
                    {TRAIT_STRONG}
                    {TRAIT_RESILIENT}
                    [/modifications]
                    id=Guard_4_1
                    type="Halberdier"
                    x=40
                    y=25
                    max_moves=3
                [/unit]

                {MOVE_UNIT id=Guard_4_1 40 21}

                [unit]
                    side=4
                    ai_special=guardian
                    random_traits=no
                    upkeep=0
                    [modifications]
                    {TRAIT_STRONG}
                    {TRAIT_RESILIENT}
                    [/modifications]
                    id=Guard_4_2
                    type="Halberdier"
                    x=40
                    y=25
                    max_moves=3
                [/unit]

                {MOVE_UNIT id=Guard_4_2 38 21}
                [/then]
                [else]

                {MOVE_UNIT id=Commander2 39 23}
                {MODIFY_TERRAIN Ke^Qhh 39 23}
                {MODIFY_TERRAIN Ce^Qhh 40 22}
                {MODIFY_TERRAIN Ce^Qhh 39 22}
                {MODIFY_TERRAIN Ce^Qhh 38 22}
                [redraw][/redraw]

                [unit]
                    side=4
                    ai_special=guardian
                    random_traits=no
                    upkeep=0
                    [modifications]
                    {TRAIT_STRONG}
                    {TRAIT_RESILIENT}
                    [/modifications]
                    id=Guard_4_1
                    type="Halberdier"
                    x=40
                    y=25
                    max_moves=3
                [/unit]

                {MOVE_UNIT id=Guard_4_1 40 21}

                [unit]
                    side=4
                    ai_special=guardian
                    random_traits=no
                    upkeep=0
                    [modifications]
                    {TRAIT_STRONG}
                    {TRAIT_RESILIENT}
                    [/modifications]
                    id=Guard_4_2
                    type="Halberdier"
                    x=40
                    y=25
                    max_moves=3
                [/unit]
                {MOVE_UNIT id=Guard_4_2 38 21}
                [/else]
        [/if]

        [message]
        speaker=Commander1
        message= _ "We've outpaced those foul-smelling orcs! Time to seize the ford and block their path."
        [/message]
        [message]
        speaker=Bastard
        message= _ "I have a bad feeling about this. But we must not falter!"
        [/message]
    [/event]

    {FORCE_CHANCE_TO_HIT (side=1) (id=Commander1) 0 ()}
    {FORCE_CHANCE_TO_HIT (side=1) (id=Commander2) 0 ()}

    [event]
    name=turn_7

    {REPLACE_SCENARIO_MUSIC the_city_falls.ogg}
    {APPEND_MUSIC "casualties_of_war.ogg"}
    {APPEND_MUSIC "battle.ogg"}

        [unit]
        id=messenger
        #ifdef EASY
            type=Goblin Knight
            hitpoints=35
            experience=4
        #endif
        #ifdef NORMAL
            type=Wolf Rider
            hitpoints=20
            experience=16
        #endif
        #ifdef HARD
            type=Wolf Rider
            hitpoints=20
            experience=16
        #endif
        [modifications]
            {TRAIT_STRONG}
            {TRAIT_QUICK}
        [/modifications]
        x,y=46,12
        [/unit]

        {MOVE_UNIT id=messenger 22 14}

        [message]
        speaker=messenger
        message= _"Mischief, mischief, all's scramblin'! The scrap... gone south! Big Boss... vanished! The Mighty Mob... clobbered! Loads o' clans got minced! We's the lucky gits, most of our stabbers made it, they's hoofin' it here, but them Alliance pests are snappin' at their heels, the big hat wants you to guard the bridge!"
        [/message]
        [message]
        speaker=Bastard
        message= _"Damn it. This smelled like a poor plan from the very beginning. My goblins and I don't want to spill blood for those orcish brutes. Seems like we don't have a choice though!"
        [/message]

        [micro_ai]
            side=2
            ai_type=goto
            action=add
            release_unit_at_goal=yes
            [filter]
                side=2
            [/filter]
            [filter_location]
                x,y=1,18
            [/filter_location]
            ca_score=600000
        [/micro_ai]

        #ai for alliance

        [micro_ai]
            side=3
            ai_type=simple_attack
            action=add
            ca_score=110000
            [filter]
                race=human,dwarf
                canrecruit=no
            [/filter]
            [filter_second]
            side=2
            [/filter_second]
        [/micro_ai]
        [micro_ai]
            side=4
            ai_type=simple_attack
            action=add
            ca_score=110000
            [filter]
                race=human,dwarf
                canrecruit=no
            [/filter]
            [filter_second]
                side=2
            [/filter_second]
        [/micro_ai]
    [/event]
    [event]
    name=turn_8
    first_time_only=yes

        {REPEAT 2 (

            [unit]
            type=Orcish Grunt
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit])}

            [unit]
            type=Orcish Warrior
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit]

            [unit]
            type=Orcish Grunt
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit]

        

        [scroll_to_unit]
            side=2
        [/scroll_to_unit]

        [message]
            speaker=messenger
            message= _ "There they be, our kinfolk in the distance!"
        [/message]
        [message]
        speaker=Bastard
        message= _ "Ay, cowards ahead! Get your way over here fast, or I'll make you fly the other way!"
        [/message]

        [objectives]
            silent=no
                [objective]
                    description= _ "Protect the retreating orcs"
                    condition=win
                [/objective]
                [objective]
                    description= _ "Death of Moog"
                    condition=lose
                [/objective]
                [objective]
                    description= _ "Death of 8 retreating orcs ($dead_orcs|/8)"
                    condition=lose
                [/objective]
                {TURNS_RUN_OUT}
                [note]
                    description=_"The retreating orcs will try to cross the river and get to the west border of the road."
                [/note]
                [note]
                    description=_"Alliance soldiers prefer to attack retreating orcs rather than your units."
                [/note]
            [gold_carryover]
                    bonus=yes
                    carryover_percentage=40
            [/gold_carryover]
            delayed_variable_substitution=yes
        [/objectives] 
    [/event]  

    #waves 

    [event]
    name=turn_10
    first_time_only=yes

         {REPEAT 2 (

            [unit]
            type=Orcish Grunt
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit])}

            [unit]
            type=Orcish Warrior
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit]

            [unit]
            type=Orcish Grunt
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit]
    [/event]
    [event]
    name=turn_12
    first_time_only=yes

         {REPEAT 2 (

            [unit]
            type=Orcish Grunt
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit])}

            [unit]
            type=Orcish Warrior
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit]

            [unit]
            type=Orcish Grunt
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit]
    [/event]
    [event]
    name=turn_14
    first_time_only=yes

        {REPEAT 2 (

            [unit]
            type=Orcish Grunt
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit])}

            [unit]
            type=Orcish Warrior
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit]

            [unit]
            type=Orcish Grunt
            side=2
            x,y=46,12
            animate=yes
            role=retreat
            [/unit]

            
    [/event]

    #first saved orcs

    [event]
    name=moveto
    first_time_only=yes

        [filter]
        side=2
        type=Orcish Grunt,Orcish Warrior
            [filter_location]
                x,y=21,14
                radius=3
            [/filter_location]
        [/filter]

        [message]
        speaker=unit
        message= _ "Never thought I'd get bailed out by wimps one day."
        [/message]
        [message]
        speaker=Bastard
        message= _ "How many of you are left?"
        [/message]
        [message]
        speaker=unit
        message= _ "We lost over half of our forces in the front lines. More will fall to the Alliance on their escape to safety. Only very few will reach the crossing."
        [/message]
        [message]
        speaker=Bastard
        message= _ "Help us protect the crossing. We can't stand much longer against these human forces."
        [/message]
        [message]
        speaker=unit
        message= _ "You have no right to command me, stinky creep. We have our orders to retreat, just like you have yours to defend us with your life. Do as he says."
        [/message]
        [message]
        speaker=Bastard
        message= _ "..."
        [/message]
    [/event]

    #orcs goes away from map

    [event]
    name=moveto
    first_time_only=no

        [filter]
        side=2
        [not]
            id=Son
        [/not]
            [filter_location]
                x,y=1,18
                radius=1
            [/filter_location]
        [/filter]

        [kill]
        side=2
        x,y=1,18
        radius=1
        animation=no
        [/kill]
    [/event]

    #defeat condition

    [event]
    name=die
    id=orcs_dead_before_rebellion
    first_time_only=no

        [filter]
        side=2
        [/filter]

        {VARIABLE_OP dead_orcs add 1}

        [if]

            [variable]
                name=dead_orcs
                numerical_equals=8
            [/variable]

        [then]
            [message]
            speaker=Bastard
            message= _"Almost all orcs have been slaughtered. We are beyond saving."
            [/message]
            [endlevel]
            result=defeat
            [/endlevel]
        [/then]

        [else]
        [/else]

        [/if]
    [/event]

    #chief is dead wave

    [event]
    name=turn_12

        [message]
        side=2
        x,y=46,12
        message= _ "Chief... dead! Our chief is dead!"
        [/message]
        [message]
        speaker=Bastard
        message= _ "Are you the last ones?"
        [/message]
        [message]
        side=2
        x,y=46,12
        message= _ "Gurrak took command, he is heroically covering the tail of our column. He will arrive soon."
        [/message]
        [message]
        speaker=Bastard
        message= _ "Uh-huh. Then we'll retreat with him."
        [/message]
    [/event]

    #bonus alliance wave

    [event]
    name=turn_11
    first_time_only=yes

        [unit]
        side=3
        {TYPE_ON_DIFFICULTY "Dwarvish Miner" "Dwarvish Scout" "Dwarvish Pathfinder"}
        x,y=6,4
        id=Scout1
        animate=no
        [/unit]

        {MOVE_UNIT id=Scout1 6 5}

        [unit]
        side=3
        name=_ "Alliance Soldier"
        type=Dwarvish Fighter
        x,y=6,4
        id=Scout2
        animate=no
        [/unit]

        {MOVE_UNIT id=Scout2 5 5}

        [unit]
        side=3
        name=_ "Alliance Soldier"
        type=Dwarvish Thunderer
        x,y=6,4
        id=Scout3
        animate=no
        [/unit]

        {MOVE_UNIT id=Scout3 7 5}

        [message]
        speaker=Scout1
        message=_ "Told ya this ancient tunnel'd sneak us past them orcs!"
        [/message]
        [message]
        speaker=Scout2
        message=_ "We gotta nab that ford and turn heroes quick, or the general's gonna have our heads for breakin' ranks."
        [/message]
    [/event]

    #last wave

    [event]
    name=turn_16

        #gurrak after battle

        [unit]
            side=2
            name="Gurrak the Chief"
            role=veteran
            profile=portraits/gurrak.png
            canrecruit=yes
            id=Son
            type=Orcish Ruler
            x=46
            y=12
            animate=yes
        [/unit]
        [unit]
            side=2
            name="Gurrak's Veteran"
            role=veteran
            type=Orcish Warrior
            x=46
            y=11
            animate=yes
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
            experience=16
        [/unit]
        [unit]
            side=2
            name="Gurrak's Veteran"
            role=veteran
            type=Orcish Warrior
            x=45
            y=12
            animate=yes
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
            experience=24
        [/unit]
        [unit]
            name="Gurrak's Veteran"
            side=2
            type="Orcish Warrior"
            role=veteran
            x=46
            y=13
            animate=yes
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
            experience=20
        [/unit]

        #alliance shocktroopers

        [unit]
        side=3
        type=Dwarvish Fighter
        x,y=46,9
        name=_ "Alliance Shocktrooper"
        id=Warrior1
        [modifications]
            {TRAIT_RESILIENT}
            {TRAIT_INTELLIGENT}
        [/modifications]
        [/unit]

        {MOVE_UNIT id=Warrior1 42 9}

        [unit]
        side=3
        #ifdef EASY
        type=Dwarvish Fighter
        #endif
        #ifdef NORMAL
        type=Dwarvish Fighter
        #endif
        #ifdef HARD
        type=Dwarvish Steelclad
        #endif
        x,y=46,9
        name=_ "Alliance Shocktrooper"
        id=Warrior2
        experience=16
        [modifications]
            {TRAIT_RESILIENT}
            {TRAIT_INTELLIGENT}
        [/modifications]
        [/unit]

        {MOVE_UNIT id=Warrior2 44 10}

        [unit]
        side=4
        type=Heavy Infantryman
        x,y=46,15
        name=_ "Alliance Shocktrooper"
        id=Warrior3
        [modifications]
            {TRAIT_RESILIENT}
            {TRAIT_INTELLIGENT}
        [/modifications]
        [/unit]

        {MOVE_UNIT id=Warrior3 42 15}

        [unit]
        side=4
        #ifdef EASY
        type=Heavy Infantryman
        #endif
        #ifdef NORMAL
        type=Shock Trooper
        #endif
        #ifdef HARD
        type=Shock Trooper
        #endif
        x,y=46,15
        name=_ "Alliance Shocktrooper"
        id=Warrior4
        [modifications]
            {TRAIT_RESILIENT}
            {TRAIT_INTELLIGENT}
        [/modifications]
        [/unit]

        {MOVE_UNIT id=Warrior4 44 14}

        #alliane general

        [unit]
        side=3
        id=General
        type=Dwarvish Lord
        canrecruit=yes
        extra_recruit=Dwarvish Steelclad,Shock Trooper
        x,y=46,1
        name=_ "Alliance General"
        [/unit]

        {MOVE_UNIT id=General 41 5}

        [modify_unit]
        [filter]
            id=General
        [/filter]
        facing=sw
        [/modify_unit]

        [delay]
        time=300
        [/delay]

        [message]
        speaker=General
        message=_ "I ordered you to seize the crossing, and it's still standing. What in blazes are you doing back here, commander?!"
        [/message]
        [message]
        speaker=Commander1
        message=_ "The orcs have proven more tenacious than we anticipated, my lord..."
        [/message]
        [message]
        speaker=General
        message=_ "Foolish coward, it's all goblins and wimps! Incompetence is not tolerated in the ranks of the Alliance. The <i>Dwarven Doors</i> will never be safe should we fail. You're demoted, sergeant. Join the front lines, may the goblin's spears pierce some wisdom into your corpse!"
        [/message]

        [modify_unit]
        [filter]
            id=Commander1
        [/filter]
        canrecruit=no
        id=No_Commander
        [/modify_unit]

        {MOVE_UNIT id=No_Commander 40 3}
        {MOVE_UNIT id=General 42 2}

        [modify_side]
        side=3
        gold=1000

            [ai]
            [aspect]
            id=recruitment_instructions
            [facet]
            [value] 
                [recruit]
                    type=Dwarvish Steelclad,Shock Trooper
                number=30
                [/recruit]
            [/value]
            [/facet]
            [/aspect]
            [/ai]

        [/modify_side]
        
        [message]
        speaker=Son
        message= _"Damn it, the Alliance's infantry has caught up with us! Hey, weaklings. Cover your new chief with your bodies, it's your turn to serve and die!"
        [/message]

        [objectives]
            silent=no
                [objective]
                    description= _ "Protect Gurrak"
                    condition=win
                [/objective]
                [objective]
                    description= _ "Death of Moog"
                    condition=lose
                [/objective]
                [objective]
                    description= _ "Death of Gurrak"
                    condition=lose
                [/objective]
                [objective]
                    description= _ "Death of 8 retreating orcs ($dead_orcs|/8)"
                    condition=lose
                [/objective]
                {TURNS_RUN_OUT}
                [note]
                    description=_"The retreating orcs will try to cross the river and get to the west border of the road."
                [/note]
                [note]
                    description=_"Alliance soldiers prefer to attack retreating orcs rather than your units."
                [/note]
                [gold_carryover]
                    bonus=yes
                    carryover_percentage=40
                [/gold_carryover]
                delayed_variable_substitution=yes
        [/objectives] 
    [event]
    name=new_turn
    id=rebellion_of_moog
    first_time_only=no

        [if]

        [have_unit]
        id=Son
            [filter_location]
                x=1-23
            [/filter_location]
        [/have_unit]

        [then]

        {REPLACE_SCENARIO_MUSIC northerners.ogg}
        {APPEND_MUSIC "frantic.ogg"}
        {APPEND_MUSIC "casualties_of_war.ogg"}
        {APPEND_MUSIC "battle.ogg"}

        [message]
        speaker=Son
        message=_ "Not a bad job, runts. I thought your sphincter would lose control before you took a step towards the Alliance."
        [/message]
        [message]
        speaker=Bastard
        message= _"Are we retreating now?"
        [/message]
        [message]
        speaker=Son
        message=_ "Hahaha! You? No, bastard. The enemy is right on our tail. Someone has to slow them down. And someone is going to be you."
        [/message]
        [message]
        speaker=Bastard
        message= _"But we already defeated the light troops. The heavy infantry can't catch up with us in the hills."
        [/message]
        [message]
        speaker=Son
            message=_ "Shut your annoying mouth. The dwarves will catch up with us, and the big orcs have sacrificed enough in this war. It's time for you wimps to pay your debt to us!"
        [/message]
        [message]
        speaker=Bastard
        message= _"Grrr... Shut up, weak-boned coward!"
        [/message]
        [message]
        speaker=Son
        message= _"What... did... you... say?"
        [/message]
        [message]
        speaker=Bastard
        message= _"Times of suppression are over. I will sacrifice no longer for unreasonable monsters like you."
        [/message]
        [message]
        speaker=Son
        message= _"I always knew you were alien to the concept of duty. You are not an orc. You're dirt. Goblins, kill him and hold off the Alliance soldiers!"
        [/message]
        [message]
        side=1
        canrecruit=no
        message= _"Nah, ain't happenin'."
        [/message]
        [message]
        speaker=Son
        message= _"The filth decides to rebel? Well, I've been wanting to cleanse these lands off your useless stomachs for far too long!"
        [/message]

        {VARIABLE_OP gurrak_come add 1}

        [modify_side]
        side=2
        team_name=Evil_Orcs
        [/modify_side]

        [micro_ai]
            side=2
            ai_type=simple_attack
            action=add
            ca_score=110000
            [filter]
               side=2
            [/filter]
            [filter_second]
                side=1
            [/filter_second]
        [/micro_ai]
        [micro_ai]
            side=2
            ai_type=goto
            action=change
            release_unit_at_goal=yes
            [filter]
                side=2
                [not]
                    role=veteran
                [/not]
            [/filter]
            [filter_location]
                x,y=1,18
            [/filter_location]
            ca_score=600000
        [/micro_ai]

        [objectives]
            silent=no
            [objective]
                description= _ "Kill Gurrak and all his Veterans"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Moog"
                condition=lose
            [/objective]
            {TURNS_RUN_OUT}
            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]
        [/objectives]  


        [remove_event]
        id=orcs_dead_before_rebellion
        [/remove_event]
        [remove_event]
        id=rebellion_of_moog
        [/remove_event]

        {CLEAR_VARIABLE dead_orcs} 
        
        [event]
        name=die
        first_time_only=no

            [filter]
                side=2
                role=veteran
            [/filter]
        [if]
            [have_unit]
                side=2
                role=veteran
            [/have_unit]
        [then]
        [/then]

        [else]
            [message]
            speaker=Bastard
            message= _"<i>breathing heavily</i>"
            [/message]
            
            {TRY_SAY_BY_THIS_RACE goblin _"Ya did good. Gurrak was a rubbish boss, woulda made our lives pure misery."}
            {TRY_SAY_BY_THIS_RACE "wolf,orc" _"Ain't no one gonna twig to our uprisin'. We'll gab that Gurrak got done in by Alliance mutts. We'll be snug as bugs."}
            [message]
            speaker=Bastard
            message= _"Let's get out of here, friends!"
            [/message]
            
            [endlevel]
            result=victory
            [/endlevel]
        [/else]

        [/if]

        [/event]

        [/then]
        [else]
        [/else]
        [/if]
    [/event]   
    [/event]
    #gurrak death

    [event]
    name=last_breath

        [filter]
        id=Son
        [/filter]
        
    [if]
        [variable]
        name=gurrak_come
        numerical_equals=1
        [/variable]

    [then]
        [message]
        speaker=Son
        message= _"Scumbags... Our clan will die... You filthy b..."
        [/message]
    [/then]
    [else]
        [message]
        side=1
        canrecruit=no
        message= _"With no proper big hat, our mob's got no tomorrows!"
        [/message]
        [endlevel]
        result=defeat
        [/endlevel]
    [/else]
    [/if]
    [/event]

    #moog death - defeat

    [event]
    name=die

        [filter]
        id=Bastard
        [/filter]
        [filter_second]
        side=3
        [/filter_second]

        [message]
        speaker=Bastard
        message=_ "There's nothing worse... Than dying in a war... For these weak-bones..."
        [/message]
        [endlevel]
        result=defeat
        [/endlevel]
    [/event]
    [event]
    name=die

        [filter]
        id=Bastard
        [/filter]
        [filter_second]
        side=2
        [/filter_second]

        [message]
        speaker=second_unit
        message=_ "I've long wanted to wash away this stain of shame from our clan."
        [/message]
        [message]
        side=1
        canrecruit=no
        message=_ "Spare us! We weren't keen on Moog neither, we'll toe the line, keep them Alliance sods at bay!"
        [/message]
        [message]
        speaker=second_unit
        message=_ "You better be right, useless crap. Make your time worthwhile."
        [/message]
        [endlevel]
        result=defeat
        [/endlevel]
    [/event]
    [event]
    name=time_over

        [message]
        speaker=Bastard
        message=_ "The Alliance is too strong... Their reinforcements grow with every goblin we lose. We're gonna die for the big orcs, just like that weak-boned Gurrak intended."
        [/message]
        [endlevel]
        result=defeat
        [/endlevel]
    [/event]
[/scenario]

#undef TRY_SAY_BY_THIS_RACE
