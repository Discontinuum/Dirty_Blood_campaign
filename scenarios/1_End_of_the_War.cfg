#textdomain wesnoth-DB

#define TRY_SAY_BY_THIS_RACE RACE MES
	[if]
        [have_unit]
            race={RACE}
        [/have_unit]
        [then]
            [message]
            	side=1
            	canrecruit=no
            	race={RACE}
            	message={MES}
            [/message]
        [/then]
        [else]
            [message]
            	side=1
            	canrecruit=no
            	message={MES}
            [/message]
        [/else]
    [/if]
#enddef

[scenario]
    id=1_The_End_of_the_War
    name = _ "Commander of Weaklings"
    random_start_time=no
    experience_modifier=100
    map_data="{~add-ons/Dirty_Blood/maps/1_End_of_the_War.map}"
    victory_when_enemies_defeated=no
    next_scenario=2_Breaking_Tradition
    carryover_percentage=40
    carryover_add=yes
    current_time=2

    {TURNS 32 30 28}
    {SCENARIO_MUSIC "underground.ogg"}
    {WINTER_SCHEDULE}
    {EVENTS_FOR_ABILITIES}

    [story]
        [part]
            story= _"Thirty years ago Kapou'e Black Eye united the disparate orc clans under his banner. Since then, no ruler had dared to attack the powerful union of clans. The Iron Law of the Supreme Leader suppressed inter-clan strife. In the united country orcs were multiplying, licking their wounds, establishing new settlements, they were recovering from the great war. But Kapou'e died and the union weakened. The air smelled of the old orcish life."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"A young clan of Straight Blades founded by veterans of the Kapou'e army was located in the southeast of the Union bordering the Barren Plains where wild nomadic ogres lived. Ogre raids used to be commonplace; they stopped during the Kapou'e era. Unfortunately for the Straight Blades, orcs were not the only ones who grew stronger after the respite."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"Sensing that the unity of orcs was weakening, the ogres gathered a large horde and raided the Straight Blades. Hundreds of hungry, snarling, hooting ogres came under the orcish walls."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"The orcs fought worthy of their ancestors, but the forces were unequal. The ogres killed all the men, ate the children, and enslaved the women. For three days and three nights, the ogres rampaged through blood-soaked streets."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"On the fourth day the ogres burned the settlement and went back to their steppes. But their carelessness had played havoc with them. An army of the border Cold Blood clan caught up with the ogre caravan. The enraged orcs brought vengeance at the tip of their blades."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"The Cold Blood warriors massacred the ogres. They freed the captives and brought them to their settlement. The chief accepted them into the clan."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"Some time later, one of the former captives gave birth. A huge, ugly child tore open its mother's womb and came into the world. The whole hut was drenched in blood. It was a half-ogre half-orc, a sinister greeting from the past."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"The chief wanted to kill him, but an old orc shamaness forbade him. The spirits told her that the clan must accept this terrible child or great misfortune would befall them."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"Gritting his teeth, the chief agreed. He ordered the shamaness to raise the cursed child."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"The baby was named 'Moog' which means 'Dirty'. Very soon the nickname 'Harmful' was added to it."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"Moog the Harmful grew up under the supervision of the orcish shamaness. Very soon he became larger and stronger than many of orcs, but his bad destiny kept him from taking his rightful place in the orc hierarchy. Moog grew up among goblins. He shared all the humiliation that the wimps are subjected to."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"But Moog himself was no wimp. Sometimes he fought back against orcs, which made him a hero in the other goblins' eyes. But Moog didn't want to be a hero of the weak. He grew up to be a strange and vicious creature."
            {DB_BIGMAP}
        [/part]

        [part]
            story= _"The years passed. As Moog came of age, war came to the orc lands. The Orc Power clashed with the Northern Alliance. The clans didn't even try to understand the reasons for the war. The Supreme Leader called the Great Horde - and the clans joined in. The chief of the Cold Blood put Moog in charge of a goblin warband."
            {DB_BIGMAP}
        [/part]
    [/story]

    {DB_TRACK {JOURNEY_01_NEW} }

    [item]
        image="scenery/mine-abandoned.png"
        visible_in_fog=yes
        x=6
        y=4
    [/item]

    [item]
        image="items/orcish-flag.png"
        visible_in_fog=yes
        x=20
        y=13
    [/item]

    [side]
        controller=human
        side=1
        gold=100
        {MOOG_HARMFUL_WAR_STATS}
        team_name=bastards
        user_team_name= _ "Cold Blood Bastards"
        recruit=Goblin Spearman,Wolf Rider,Orcish Archer
        color=lightblue
        fog=yes
        shroud=no

        [unit]
            #TODO: make him a side 2 leader in MP version
            id=Goblin_Friend
            type=Goblin Impaler
            facing=s
            profile=portraits/goblins/rouser-2.png
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
            x=20
            y=12
        [/unit]

        [unit]
            id=Goblin_Watcher
            #{TYPE_ON_DIFFICULTY "Goblin Impaler" "Goblin Impaler" "Goblin Spearman"}
            type=Goblin Spearman
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
            x=25
            y=10
        [/unit]

        [unit]
            #{TYPE_ON_DIFFICULTY "Goblin Impaler" "Goblin Impaler" "Goblin Spearman"}
            type=Goblin Spearman
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_QUICK}
            [/modifications]
            x=26
            y=12
        [/unit]

        [unit]
            #{TYPE_ON_DIFFICULTY "Goblin Impaler" "Goblin Impaler" "Goblin Spearman"}
            type=Goblin Spearman
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_QUICK}
            [/modifications]
            x=15
            y=15
        [/unit]
        [unit]
            #{TYPE_ON_DIFFICULTY "Goblin Impaler" "Goblin Impaler" "Goblin Spearman"}
            type=Goblin Spearman
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
            [/modifications]
            x=16
            y=17
        [/unit]
    [/side]

    [side]
        controller=ai
        side=2
        team_name=bastards
        user_team_name= _ "Cold Blood Warriors"
        #It's better to not define colors for easier MP adoptation
        #color=blue

        no_leader=yes
        hidden=no
        share_vision=no
        {BLACK_FLAG}

        #Gurrack and his veterans

        [unit]
            name="Gurrak the Chief's Son"
            canrecruit=yes
            profile=portraits/gurrak.png
            facing=nw
            id=Gurrak
            type="Orcish Leader"
            x=23
            y=13
        [/unit]

        [unit]
            type="Orcish Warrior"
            name=_ "Gurrak's Guard"
            x=22
            y=12
            id=guard1
        [/unit]

        [unit]
            type="Orcish Warrior"
            name=_ "Gurrak's Guard"
            x=22
            y=13
            id=guard2
        [/unit]

        [unit]
            type="Orcish Warrior"
            name=_ "Gurrak's Guard"
            x=23
            y=14
            id=guard3
        [/unit]
    [/side]

    [side]
        defeat_condition=never
        controller=ai
        side=3
        team_name=alliance
        user_team_name= _ "Northern Alliance"
        no_leader=yes
        #color=green
        hidden=no
        fog=no
        shroud=no
        {FLAG_VARIANT knalgan}
    [/side]

    #prestart event: villages, variables, objectives

    [event]
    name=prestart

        {CAPTURE_VILLAGES_OF_TYPE Rb^Vct,Re^Vct 1 19 13 20}

        [set_variable]
            name=dead_orcs
            value=0
        [/set_variable]
        [set_variable]
            name=gurrak_come
            value=0
        [/set_variable]

        [objectives]
            silent=yes
                [objective]
                    description= _ "Protect the Crossing"
                    condition=win
                [/objective]

                [objective]
                    description= _ "Death of Moog"
                    condition=lose
                [/objective]

                {TURNS_RUN_OUT}

                [gold_carryover]
                    bonus=yes
                    carryover_percentage=40
                [/gold_carryover]

                [note]
                    description=_"In this campaign, Goblin Impalers have additional level 2 advancements."
                [/note]

                [note]
                    description=_"Moog has a lot of hate. Killing enemies fuels it, increasing the damage of his attacks and making his enemies fear him."
                [/note]
        [/objectives]    
    [/event]

    #start: dialogue, moving Gurrak, prepare to defense

    [event]
    name=start

        [message]
            speaker=Gurrak
            message= _ "Useless bastards! If it were up to me, you'd all die in the front lines! But the chief ordered you to guard the crossing, so you'll sit on your asses in the rear."
        [/message]

        [message]
            speaker=Gurrak
            message= _ "I'm going to war, to shed blood like a true orc. If any of you freaks are off duty when I get back, I'll slaughter this wimp where he stands. And don't expect to share in the spoils of war."
        [/message]

        {MOVE_UNIT id=Gurrak 29 11}
        {MOVE_UNIT id=Gurrak 36 12}
        {MOVE_UNIT id=Gurrak 46 22}
       
        [store_unit]
            [filter]
                id=Gurrak 
            [/filter]
            kill=yes 
            variable=gurrak 
        [/store_unit]

        {MOVE_UNIT id=guard1 29 11}
        {MOVE_UNIT id=guard1 36 12}
        {MOVE_UNIT id=guard1 46 22}
        [store_unit]
            [filter]
                id=guard1
            [/filter]
            kill=yes 
            variable=guard1
        [/store_unit]

        {MOVE_UNIT id=guard2 29 11}
        {MOVE_UNIT id=guard2 36 12}
        {MOVE_UNIT id=guard2 46 22}
        [store_unit]
            [filter]
                id=guard2
            [/filter]
            kill=yes 
            variable=guard2
        [/store_unit]

        {MOVE_UNIT id=guard3 29 11}
        {MOVE_UNIT id=guard3 36 12}
        {MOVE_UNIT id=guard3 46 22}
        [store_unit]
            [filter]
                id=guard3
            [/filter]
            kill=yes 
            variable=guard3
        [/store_unit]

        [message]
            speaker=Goblin_Friend
            message= _"Don't care what he says, better to sit in the rear than be fodder for these huge piles of shit."
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= _"A few hours later..."
        [/message]

        [replace_schedule]
            {WINTER_SCHEDULE}
            current_time=3
        [/replace_schedule]

        [modify_side]
            side=1
            fog=no 
        [/modify_side]

        [redraw][/redraw]

        [message]
            speaker=Goblin_Watcher
            message= _"I've spotted the Alliance weasels! They're sniffing around!"
        [/message]

        #North:

        {GENERIC_UNIT 3 {ON_DIFFICULTY "Cavalryman" "Dragoon" "Dragoon"} 44 1}
        {GENERIC_UNIT 3 Cavalryman 24 1}

        #South:

        {GENERIC_UNIT 3 {ON_DIFFICULTY "Cavalryman" "Dragoon" "Dragoon"} 39 22}
        {GENERIC_UNIT 3 Cavalryman 45 17}
       
        [scroll_to_unit]
            x,y=44,1
        [/scroll_to_unit]

        [delay]
            time=500
        [/delay]

        [scroll_to_unit]
            x,y=39,22
        [/scroll_to_unit]

        [delay]
            time=500
        [/delay]

        [message]
            speaker=Bastard
            message= _"Let's chase them away."
        [/message]
    [/event]

    #Alliance Forces Spawn:
    
    #define SPAWN_UNIT SIDE TYPE X1 Y1 X2 Y2
        [move_unit_fake]
            type={TYPE}
            side={SIDE}
            x={X1},{X2}
            y={Y1},{Y2}
        [/move_unit_fake]

        {GENERIC_UNIT {SIDE} {TYPE} {X2} {Y2}}
    #enddef

    [event]
    name=turn_5

        {REPLACE_SCENARIO_MUSIC the_city_falls.ogg}
        {APPEND_MUSIC "casualties_of_war.ogg"}
        {APPEND_MUSIC "battle.ogg"}

        [move_unit_fake]
            type={ON_DIFFICULTY "Goblin Knight" "Wolf Rider" "Wolf Rider"}
            side=1
            x=46,36,29,22
            y=12,12,11,14
        [/move_unit_fake]

        [unit]
            id=messenger
            #ifdef EASY
                type=Goblin Knight
                hitpoints=35
                experience=4
            #endif
            #ifdef NORMAL
                type=Wolf Rider
                hitpoints=20
                experience=16
            #endif
            #ifdef HARD
                type=Wolf Rider
                hitpoints=20
                experience=16
            #endif
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_QUICK}
            [/modifications]
            x,y=22,14
        [/unit]

        [message]
            speaker=messenger
            message= _"Trouble, trouble, everyone's fleeing! The battle... lost! Supreme Leader... missing! The Great Horde... defeated! Many clans have been slaughtered! We've been lucky, most of the warriors of our clan survived, they rushing here, but the Alliance skirmishers are on their tail, the chief ordered you to protect the crossing!"
        [/message]

        [message]
            speaker=Bastard
            message= _"Smells like a big fight. Shit! I don't want to spill blood for these assholes. But we don't have a choice."
        [/message]

        [micro_ai]
            side=2 #MP!
            ai_type=goto
            action=add
            release_unit_at_goal=yes
            [filter]
                side=2 #MP!
            [/filter]
            [filter_location]
                x,y=1,18
            [/filter_location]
            ca_score=600000
        [/micro_ai]

        #ai for alliance

        [micro_ai]
            side=3 #MP!
            ai_type=simple_attack
            action=add
            ca_score=110000
            [filter]
                race=human,dwarf
                canrecruit=no
            [/filter]
            [filter_second]
                side=2 #MP!
            [/filter_second]
        [/micro_ai]
    [/event]

    [event]
    name=turn 6,turn 9,turn 12,turn 14
    first_time_only=no

        {REPEAT 3 (
            [unit]
                type=Orcish Grunt
                side=2 #MP!
                x,y=46,12
                animate=yes
                role=retreat
            [/unit])}

        [unit]
            type=Orcish Warrior
            side=2 #MP!
            x,y=46,12
            animate=yes
            role=retreat
        [/unit]

        #MP!

        {SPAWN_UNIT 3 Liuentenant 37 1 37 2}
        {SPAWN_UNIT 3 {ON_DIFFICULTY Bowman Bowman Longbowman} 35 1 35 2}
        {SPAWN_UNIT 3 {ON_DIFFICULTY Spearman Swordsman Swordsman} 36 1 36 2}
        {SPAWN_UNIT 3 {ON_DIFFICULTY Bowman Longbowman Longbowman} 38 1 38 2}
        {SPAWN_UNIT 3 {ON_DIFFICULTY Spearman Spearman Swordsman} 39 1 39 2}

        {SPAWN_UNIT 3 Liuentenant 41 26 39 22}
        {SPAWN_UNIT 3 {ON_DIFFICULTY Bowman Bowman Longbowman} 41 26 37 22}
        {SPAWN_UNIT 3 {ON_DIFFICULTY Spearman Swordsman Swordsman} 41 26 38 22}
        {SPAWN_UNIT 3 {ON_DIFFICULTY Bowman Longbowman Longbowman} 41 26 40 22}
        {SPAWN_UNIT 3 {ON_DIFFICULTY Spearman Spearman Swordsman} 41 26 41 22}
       
        [scroll_to_unit]
            x,y=46,12
        [/scroll_to_unit]

        [fire_event]
            name=first dialog
        [/fire_event]
    [/event]

    [event]
    name=first dialog

        [message]
            speaker=messenger
            message= _ "There they are, our clansmen on the horizon!"
        [/message]

        [message]
            speaker=Bastard
            message= _ "I hope our dumbasses move their asses."
        [/message]

        [objectives]
            silent=no
            delayed_variable_substitution=yes

            [objective]
                description= _ "Protect the retreating orcs"
                condition=win
            [/objective]

            [objective]
                description= _ "Death of Moog"
                condition=lose
            [/objective]

            [objective]
                description= _ "Death of 8 retreating orcs ($dead_orcs|/8)"
                condition=lose
            [/objective]

            {TURNS_RUN_OUT}

            [gold_carryover]
                    bonus=yes
                    carryover_percentage=40
            [/gold_carryover]

            [note]
                description=_"The retreating orcs will try to cross the river and get to the west border of the road."
            [/note]

            [note]
                description=_"Alliance soldiers prefer to attack retreating orcs rather than your units."
            [/note]
        [/objectives] 
    [/event]  

    [event]
    name=moveto
    first_time_only=yes

        [filter]
            type_adv_tree="Orcish Grunt"
            [filter_location]
                x,y=21,14
                radius=3
            [/filter_location]
        [/filter]

        [message]
            speaker=unit
            message= _ "I didn't think I'd be saved by wimps one day."
        [/message]

        [message]
            speaker=Bastard
            message= _ "How many of yours are left?"
        [/message]

        [message]
            speaker=unit
            message= _ "About a half of the warriors, but only a few will reach the river under the blows of the Alliance dogs."
        [/message]

        [message]
            speaker=Bastard
            message= _ "I see. Help us protect the crossing."
        [/message]

        [message]
            speaker=unit
            message= _ "You have no right to order me around, asshole. The chief ordered us to retreat to the mountains and you to defend the crossing. Do as he says."
        [/message]

        [message]
            speaker=Bastard
            message= _ ". . ."
        [/message]
    [/event]

    #Orcs go away from map:

    [event]
    name=moveto
    first_time_only=no

        [filter]
            type_adv_tree="Orcish Grunt"
            [not]
                id=Gurrak
            [/not]
            [filter_location]
                x,y=1,18
                radius=1
            [/filter_location]
        [/filter]

        [kill]
            x,y=1,18
            radius=1
            animation=no
        [/kill]
    [/event]

    #Defeat condition:

    [event]
    name=die
    id=orcs_dead_before_rebellion
    first_time_only=no

        [filter]
            type_adv_tree="Orcish Grunt"
        [/filter]

        {VARIABLE_OP dead_orcs add 1}

        [if]

            [variable]
                name=dead_orcs
                numerical_equals=8
            [/variable]

        [then]
            [message]
                speaker=Bastard
                message= _"Almost all of the douchebags have been slaughtered. Now the whole clan will die."
            [/message]

            [endlevel]
                result=defeat
            [/endlevel]
        [/then]

        [else]
        [/else]

        [/if]
    [/event]

    #chief is dead wave

    [event]
    name=turn_14

        [message]
            x,y=46,12
            message= _ "Chief... dead! Our chief is dead!"
        [/message]

        [message]
            speaker=Bastard
            message= _ "Are you the last ones?"
        [/message]

        [message]
            x,y=46,12
            message= _ "Gurrak took command, he is heroically covering the tail of our column. He will be here soon."
        [/message]

        [message]
            speaker=Bastard
            message= _ "Uh-huh. Then we'll retreat with him."
        [/message]
    [/event]

    #bonus alliance wave if it's not easy diff
    #ifndef EASY

    [event]
    name=turn_11
    first_time_only=yes

        [unit]
            side=3 #MP!
            type={ON_DIFFICULTY "Dwarvish Miner" "Dwarvish Scout" "Dwarvish Pathfinder"}
            x,y=6,4
            id=DScout1
            animate=no
        [/unit]

        {MOVE_UNIT id=DScout1 6 5}

        [unit]
            side=3 #MP!
            name=_ "Alliance Soldier"
            type=Dwarvish Fighter
            x,y=6,4
            id=DScout2
            animate=no
        [/unit]

        {MOVE_UNIT id=DScout2 5 5}

        [unit]
            side=3 #MP!
            name=_ "Alliance Soldier"
            type=Dwarvish Thunderer
            x,y=6,4
            id=DScout3
            animate=no
        [/unit]

        {MOVE_UNIT id=DScout3 7 5}

        [message]
            speaker=DScout1
            message=_ "I told you this old mine is a way to get behind the orcs!"
        [/message]

        [message]
            speaker=DScout2
            message=_ "We must seize the crossing and be heroes soon, or the general will kill us for leaving the formation."
        [/message]
    [/event]
#endif

    #Last wave:

    [event]
    name=turn_17

        #gurrak after battle

        [unstore_unit]
            variable=gurrak 
            find_vacant=yes 
            x,y=46,12
            animate=yes 
        [/unstore_unit]

        [unstore_unit]
            variable=guard1
            find_vacant=yes 
            placement=leader
            animate=yes 
        [/unstore_unit]

        [unstore_unit]
            variable=guard2
            find_vacant=yes 
            placement=leader
            animate=yes 
        [/unstore_unit]

        [unstore_unit]
            variable=guard3
            find_vacant=yes 
            placement=leader
            animate=yes 
        [/unstore_unit]

        #alliance shocktroopers

        {SPAWN_UNIT 3 {ON_DIFFICULTY "Dwarvish Fighter" "Dwarvish Steelclad" "Dwarvish Steelclad"} 46 9 42 9}
        {SPAWN_UNIT 3 "Dwarvish Fighter" 46 9 44 10}
        {SPAWN_UNIT 3 {ON_DIFFICULTY "Heavy Infantryman" "Shocktrooper" "Shocktrooper"} 46 15 42 15}
        {SPAWN_UNIT 3 "Heavy Infantryman" 46 15 44 14}

        #Alliane general

        [unit]
            side=3
            id="General Dunrol"
            type=Dwarvish Lord
            canrecruit=yes
            x,y=46,1
            name=_ "General Dunrol"
            ai_specials=guardian
        [/unit]

        {MOVE_UNIT id="General Dunrol" 42 2}

        [modify_unit]
            [filter]
                id="General Dunrol"
            [/filter]
            facing=sw
        [/modify_unit]

        [delay]
            time=300
        [/delay]

        [message]
            speaker="General Dunrol"
            message=_ "I ordered you to seize the crossing, and it's still standing. What the hell are you doing here, soldiers?!"
        [/message]

        [message]
            [filter_side]
                [enemy_of]
                    side=1
                [/enemy_of]
            [/filter_side]
            canrecruit=no
            message=_ "The orcs have proven more tenacious than we anticipated, my lord..."
        [/message]

        [message]
            speaker="General Dunrol"
            message=_ "Idiot, it's all goblins and wimps! Because of incompetents like you, the people of the Dwarven Doors will never be safe. You're demoted to private. Go on the attack, maybe there you'll get some wisdom!"
        [/message]
        
        [message]
            speaker=Gurrak
            message= _"Damn it, the Alliance infantry have caught up with us! Hey, you bastards, cover your new chief with your bodies, it's your turn to die!"
        [/message]

        [objectives]
            silent=no
                [objective]
                    description= _ "Protect Gurrak"
                    condition=win
                [/objective]
                [objective]
                    description= _ "Death of Moog"
                    condition=lose
                [/objective]
                [objective]
                    description= _ "Death of Gurrak"
                    condition=lose
                [/objective]
                [objective]
                    description= _ "Death of 8 retreating orcs ($dead_orcs|/8)"
                    condition=lose
                [/objective]
                {TURNS_RUN_OUT}
                [note]
                    description=_"The retreating orcs will try to cross the river and get to the west border of the road."
                [/note]
                [note]
                    description=_"Alliance soldiers prefer to attack retreating orcs rather than your units."
                [/note]
                [gold_carryover]
                    bonus=yes
                    carryover_percentage=40
                [/gold_carryover]
                delayed_variable_substitution=yes
        [/objectives] 

        [event]
        name=turn 18,turn 20, turn 22,turn 24,turn 26,turn 28,turn 30
        first_time_only=no 

            {SPAWN_UNIT 3 "Dwarvish Steelclad" 37 1 37 2}
            {SPAWN_UNIT 3 "Dwarvish Steelclad" 35 1 35 2}
            {SPAWN_UNIT 3 "Dwarvish Steelclad" 36 1 36 2}
            {SPAWN_UNIT 3 "Dwarvish Steelclad" 38 1 38 2}
            {SPAWN_UNIT 3 "Dwarvish Steelclad" 39 1 39 2}

            {SPAWN_UNIT 3 "Shocktrooper" 41 26 39 22}
            {SPAWN_UNIT 3 "Shocktrooper" 41 26 37 22}
            {SPAWN_UNIT 3 "Shocktrooper" 41 26 38 22}
            {SPAWN_UNIT 3 "Shocktrooper" 41 26 40 22}
            {SPAWN_UNIT 3 "Shocktrooper" 41 26 41 22}
        [/event]

        [event]
        name=new_turn
        id=rebellion_of_moog
        first_time_only=no

            [if]
                [have_unit]
                    id=Gurrak
                    [filter_location]
                        x=1-23
                    [/filter_location]
                [/have_unit]

            [then]

            {REPLACE_SCENARIO_MUSIC northerners.ogg}
            {APPEND_MUSIC "frantic.ogg"}
            {APPEND_MUSIC "casualties_of_war.ogg"}
            {APPEND_MUSIC "battle.ogg"}

            [message]
                speaker=Gurrak
                message=_ "Not a bad job, bastards. I thought you'd shit your pants and run as soon as you saw Alliance soldiers."
            [/message]

            [message]
                speaker=Bastard
                message= _"Are we retreating now?"
            [/message]

            [message]
                speaker=Gurrak
                message=_ "You are? No, the enemy is still on our tail, someone has to stop them, and it's gonna be you."
            [/message]

            [message]
                speaker=Bastard
                message= _"But we defeated the Alliance light troops. The heavy infantry can't catch up with us in the hills."
            [/message]

            [message]
                speaker=Gurrak
                message=_ "Shut your stupid mouth. The dwarves will catch up with us, we have to hold them off. The big orcs have sacrificed enough in this war, it's time for the wimps to pay their debt to the clan!"
            [/message]

            [message]
                speaker=Bastard
                message= _"Shut up, asshole!"
            [/message]

            [message]
                speaker=Gurrak
                message= _"What did you say?!"
            [/message]

            [message]
                speaker=Bastard
                message= _"I won't die for scumbags like you."
            [/message]

            [message]
                speaker=Gurrak
                message= _"I knew you were alien to the concept of duty, you're not an orc, you're dirt. Goblins, kill him and hold off the Alliance soldiers!"
            [/message]

            [message]
                side=1
                canrecruit=no
                message= _"No."
            [/message]

            [message]
                speaker=Gurrak
                message= _"The filth decided to rebel, well, I've been wanting to cleanse the clan of extra mouths for a long time!"
            [/message]

            {VARIABLE_OP gurrak_come add 1}

            [modify_side]
                side=2 #MP!
                team_name=evil_orcs
            [/modify_side]

            [micro_ai]
                side=2 #MP!
                ai_type=simple_attack
                action=add
                ca_score=110000
                [filter]
                side=2 #MP!
                [/filter]
                [filter_second]
                    side=1 #MP!
                [/filter_second]
            [/micro_ai]

            [micro_ai]
                side=2 #MP!
                ai_type=goto
                action=change
                release_unit_at_goal=yes
                [filter]
                    side=2 #MP!
                    [not]
                        role=veteran
                    [/not]
                [/filter]
                [filter_location]
                    x,y=1,18
                [/filter_location]
                ca_score=600000
            [/micro_ai]

            [objectives]
                silent=no
                [objective]
                    description= _ "Kill Gurrak and all his Veterans"
                    condition=win
                [/objective]
                [objective]
                    description= _ "Death of Moog"
                    condition=lose
                [/objective]
                {TURNS_RUN_OUT}
                [gold_carryover]
                    bonus=yes
                    carryover_percentage=40
                [/gold_carryover]
            [/objectives]  


            [remove_event]
                id=orcs_dead_before_rebellion
            [/remove_event]
            [remove_event]
                id=rebellion_of_moog
            [/remove_event]

            {CLEAR_VARIABLE dead_orcs} 
            
            [event]
            name=die
            first_time_only=no

                [filter]
                    side=2 #MP!
                    role=veteran
                [/filter]
            [if]
                [have_unit]
                    side=2 #MP!
                    role=veteran
                [/have_unit]
            [then]
            [/then]

            [else]
                [message]
                    speaker=Bastard
                    message= _"<i>breathing heavily</i>"
                [/message]
                
                {TRY_SAY_BY_THIS_RACE goblin _"You did the right thing. Gurrak was a shit chief, he would turn our lives into a nightmare."}
                {TRY_SAY_BY_THIS_RACE "wolf,orc" _"No one will know of our rebellion. We'll say Gurrak was killed by Alliance dogs. We'll be safe."}

                [message]
                    speaker=Bastard
                    message= _"Let's get out of here!"
                [/message]
                
                [endlevel]
                result=victory
                [/endlevel]
            [/else]

            [/if]

            [/event]

            [/then]
            [else]
            [/else]
            [/if]
        [/event]   
    [/event]
    #gurrak death

    [event]
    name=last_breath

        [filter]
            id=Gurrak
        [/filter]
        
        [if]
            [variable]
                name=gurrak_come
                numerical_equals=1
            [/variable]

        [then]
            [message]
                speaker=Gurrak
                message= _"Scumbags... Because of you, our clan will die..."
            [/message]
        [/then]
        [else]
            [message]
                side=1
                canrecruit=no
                message= _"Without a worthy leader, our clan has no future!"
            [/message]
            [endlevel]
                esult=defeat
            [/endlevel]
        [/else]
        [/if]
    [/event]

    #moog death - defeat

    [event]
    name=die

        [filter]
            id=Bastard
        [/filter]

        [filter_second]
            race=human,dwarf
        [/filter_second]

        [message]
            speaker=Bastard
            message=_ "There's nothing worse... Than dying in a war... For those assholes..."
        [/message]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    [event]
    name=die

        [filter]
            id=Bastard
        [/filter]
        [filter_second]
            race=orc
        [/filter_second]

        [message]
            speaker=second_unit
            message=_ "I've long wanted to wash away this stain of shame from our clan!"
        [/message]

        [message]
            side=1
            canrecruit=no
            message=_ "Don't kill us! We didn't like Moog either, we'll follow orders, we'll hold off the Alliance soldiers!"
        [/message]

        [message]
            speaker=second_unit
            message=_ "That's better, you shit."
        [/message]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    [event]
    name=time_over

        [message]
            speaker=Bastard
            message=_ "Shit, we've lost too much time, now we can't get away from the Alliance soldiers. We're gonna die for the big orcs, just like Gurrak's asshole wanted. Shit!"
        [/message]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
[/scenario]

#undef TRY_SAY_BY_THIS_RACE
