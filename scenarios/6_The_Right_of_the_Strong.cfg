#textdomain wesnoth-DB
[scenario]
    id=6_The_Right_of_the_Strong
    name = _ "The Right of the Strong"
    random_start_time=no
    experience_modifier=100
    map_data="{~add-ons/Dirty_Blood/maps/6_The_Right_of_the_Strong.map}"
    theme=cutscene_minimal
    victory_when_enemies_defeated=no
    next_scenario=7_Mercenaries
    carryover_percentage=100
    carryover_add=no
    {EVENTS_FOR_ABILITIES}
    {TURNS -1 -1 -1}

    {SCENARIO_MUSIC northerners.ogg}
   
    {FIRST_WATCH}

    [story]
    [part]
    story=_ "So Mug freed the ogres and made them part of his clan. He returned to the fortress and settled them near the chief's house. The ogres regarded Mug as their Khan, they were infinitely loyal to him, and Mug seemed to be safe now."
    [/part]
    [part]
    story=_ "However, soon a wolf rider arrived at the fortress with a very strange message: The Supreme Chief calls Mug to the capital. Ka'ah said it was because of an attack on another clan. Mug had no right not to report to the Supreme Chief. Ka'ah comforted him that if he behaved properly, the Supreme Leader would simply recognize the new borders and let him go."
    [/part]
    [part]
    story=_ "But Mug was cruelly mistaken. In a conversation with the Supreme Ruler, he said he thought his attack was fair just because he had the blood of the Khan of the Ogres in him."
    [/part]
    [part]
    story=_ "The Supreme Chief replied that the "Khan of the Ogres" should not stretch out his hands to orc lands. And he cut off Mug's right hand. Then ordered him out of the palace."
    [/part]
    [part]
    story=_ "Walking back, Mug thought about what had happened. Technically, the Supreme Ruler had let him go, so he recognized the new borders. But why had he cut off his hand? Just punishment?"
    [/part]
    [part]
    story=_ "The answer awaited Mug right at the gates of his home fortress. When news of the severed arm reached the fortress, several orcs from the clan challenged him to a ritual duel."
    [/part]
    [part]
    story=_ "Mug had no choice. If he ordered the ogres to kill the challengers, he would lose his authority and unleash a massacre between orcs and ogres."
    [/part]
    [part]
    story=_ "To keep his power, Mug had to accept the challenge and win by all rules. Cursing the despicable oroc traditions, the wounded chief stepped into the arena."
    [/part]
    [/story]
[item]
	image="items/orcish-flag.png"
	visible_in_fog=yes
	x=5
	y=6
[/item]
[item]
	image="items/orcish-flag.png"
	visible_in_fog=yes
	x=8
	y=4
[/item]
[item]
	image="items/orcish-flag.png"
	visible_in_fog=yes
	x=8
	y=10
[/item]
[item]
	image="items/orcish-flag.png"
	visible_in_fog=yes
	x=11
	y=9
[/item]

    [side]
        controller=human
        side=1
        {GOLD 0 0 0}
        income=0
        id=Bastard
        name=_ "Mug the Terrible"
        type=Cursed Chief FIGHTING
        team_name=bastards
        user_team_name= _ "Mug the Terrible"
        color=red
        fog=no
        shroud=no
    [/side]
    [side]
	controller="ai"
	fog=no
	hidden=no
	id=Challenger_Crossbow
	type=Orcish Slurbow Fighting
	name=_ "Rebel Challenger"
	share_vision="all"
	shroud=no
	side=2
	team_name=challengers
	color=brown
	[/side]
	[side]
        controller=null
        side=3
        no_leader=yes
        team_name=bastards
        user_team_name= _ "Orcs of ColdBlooded clan"
        color=brown
        fog=no
        shroud=no

     [unit]
		type="Novice Orcish Witch"
		x=7
		y=3
		max_moves=0
	[/unit]
	[unit]
		name="Elder Ka'ah"
		id=Kaah
		[modification]
		{TRAIT_LOYAL_HERO}
		[/modification]
		type="Orcish Witch"
		x=8
		y=2
		max_moves=0
	[/unit]
	[unit]
		type="Novice Orcish Witch"
		x=9
		y=3
		max_moves=0
	[/unit]

	[unit]
		facing="sw"
		type="Orcish Archer"
		x=12
		y=4
		max_moves=0
	[/unit]
	[unit]
		facing="sw"
		type="Orcish Archer"
		x=13
		y=6
		max_moves=0
	[/unit]
	[unit]
		facing="sw"
		type="Orcish Archer"
		x=13
		y=9
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Orcish Archer"
		x=10
		y=11
		max_moves=0
	[/unit]
	[unit]
		facing="sw"
		type="Orcish Crossbowman"
		x=13
		y=8
		max_moves=0
	[/unit]
	[unit]
		facing="nw"
		type="Orcish Grunt"
		x=12
		y=10
		max_moves=0
	[/unit]
	[unit]
		facing="nw"
		type="Orcish Assassin"
		x=13
		y=10
		max_moves=0
	[/unit]
	[unit]
		facing="nw"
		type="Orcish Assassin"
		x=11
		y=12
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Goblin Spearman"
		x=4
		y=4
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Goblin Spearman"
		x=3
		y=6
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Goblin Spearman"
		x=3
		y=7
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=6
		y=11
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=7
		y=12
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=8
		y=12
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=6
		y=12
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Goblin Spearman"
		x=4
		y=3
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Goblin Rouser"
		x=3
		y=5
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Goblin Impaler"
		x=5
		y=3
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Goblin Impaler"
		x=2
		y=6
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Goblin Spearman"
		x=2
		y=7
		max_moves=0
	[/unit]
	[unit]
		facing="sw"
		name="Бак"
		type="Orcish Grunt"
		x=14
		y=7
		max_moves=0
	[/unit]
	[unit]
		facing="sw"
		type="Orcish Archer"
		x=14
		y=8
		max_moves=0
	[/unit]
	[unit]
		facing="sw"
		name="Огоб"
		type="Orcish Warrior"
		x=12
		y=11
		max_moves=0
	[/unit]
	[unit]
		facing="nw"
		type="Orcish Archer"
		x=13
		y=11
		max_moves=0
	[/unit]
	[unit]
		facing="nw"
		type="Orcish Slayer"
		x=14
		y=9
		max_moves=0
	[/unit]
	[unit]
		facing="se"
		type="Orcish Archer"
		x=11
		y=3
		max_moves=0
	[/unit]
	[unit]
		facing="sw"
		type="Orcish Archer"
		x=12
		y=3
		max_moves=0
	[/unit]
	[unit]
		facing="sw"
		type="Orcish Grunt"
		x=13
		y=4
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=7
		y=13
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=9
		y=12
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=9
		y=13
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=8
		y=13
		max_moves=0
	[/unit]
	[unit]
		facing="n"
		type="Goblin Spearman"
		x=5
		y=12
		max_moves=0
	[/unit]
    [/side]
    [side]
        controller=null
        side=4
        no_leader=yes
        team_name=bastards
        user_team_name= _ "Moog's Ogres"
        #same colour as in the 4th scenario
        color=teal
        fog=no
        shroud=no  
        [unit]
        role=eater1
        [modifications]
        {TRAIT_LOYAL}
        [/modifications]
        type=Ogre
        x,y=3,9
        max_moves=0
        [/unit]
        [unit]
        role=eater2
        type=Ogre
        [modifications]
        {TRAIT_LOYAL}
        [/modifications]
        x,y=4,10
        max_moves=0
        [/unit]
    [/side]

#Это будет бомба
#Сценарий-файтинг основанный на адаптации к противнику 
#Это здорово раскроет лор орков и расслабит игрока после душнилова с ограми
#Нужно будет добавить кровь, обязательно кровь

[event]
name=prestart
#Задания
#Реколлы
#Искуственный Интеллект

   [micro_ai]
            side=2
            ai_type=coward
            action=add

            [filter]
            type=Orcish Slurbow Fighting
            [/filter]
            [filter_second]
            side=1
            [/filter_second]
            distance=5
            attack_if_trapped=yes
            ca_score=800000
        [/micro_ai]

        [hide_unit]
        id=Bastard_Fighting
        [/hide_unit]
        [hide_unit]
        id=Challenger_Crossbow
        [/hide_unit]
        
        [recall]
        id=Mursha
        x,y=2,8
        max_moves=0
        [/recall]

[/event]
#Теперь старт
#Передвижение героев, старотовый диалог, задания здесь, кстати.

[event]
name=start

    [message]
    speaker=Kaah
    message= _"Chief of the Coldblood Clan! Enter the arena."
    [/message]

    [unhide_unit]
        id=Bastard
    [/unhide_unit]

    {MOVE_UNIT id=Bastard 5 9}

    [message]
    speaker=Kaah
    message= _"Challenger! Enter the arena."
    [/message]

    [unhide_unit]
        id=Challenger_Crossbow
    [/unhide_unit]

    {MOVE_UNIT id=Challenger_Crossbow 11 6}

    [message]
    speaker=Challenger_Crossbow
    message= _"The Supreme Chief has pointed us straight: the Coldblood clan deserves a better chief. Mug the Freak has led us into a senseless war and flooded the settlement with ogres. I'll put an end to it!"
    [/message]
    [message]
    speaker=Bastard
    message= _"If I hadn't become chief, you'd still be licking the boots of the big orcs, you weakling. You weak, cowardly filth. I'll crush you with one hand."
    [/message]
    [message]
    speaker=Kaah
    message= _"The spirits of war are watching you, warriors. May the blood choose our strongest chief!"
    [/message]
    [message]
    speaker=Mursha
    message= _"The challenger with the crossbow is very sneaky. He will run away from you and shoot from a distance. But if you stand close to him, he will not have time to load the crossbow. Don't let him break the distance!"
    [/message]

    [object]
        silent=yes
        duration=scenario
        [filter]
            id=Bastard
        [/filter]
        [effect]
        apply_to=hitpoints
        increase_total=60
        heal_full=yes
        [/effect]
        [effect]
        apply_to=max_experience
        set=1000
        [/effect]
        [effect]
        apply_to=defense
        [defense]
        flat=100
        [/defense]
        [/effect]
        [effect]
        apply_to=resistance
        [resistance]
        pierce=0
        blade=0
        [/resistance]
        [/effect]
        [effect]
        apply_to=movement
        set=3
        [/effect]
        [effect]
        apply_to=remove_attacks
        range=melee
        [/effect]
        [effect]
        apply_to=new_attack

        name=cleaver
        description=_"cleaver"
        type=blade
        range=melee
        damage=20
        number=1
        [/effect]
        [effect]
        apply_to=new_attack

         
        name=cleaver
        description=_"Undercutting blow"
        type=blade
        range=melee
        damage=8
        number=1
        [specials]
        {WEAPON_SPECIAL_ATTACK_ONLY}
        {WEAPON_SPECIAL_SLOW}
        [/specials]
        [/effect]
        [effect]
        apply_to=new_attack

        name=cleaver
        description=_"Bite"
        type=blade
        range=melee
        damage=4
        number=1
    [specials]
    {WEAPON_SPECIAL_ATTACK_ONLY}
    {WEAPON_SPECIAL_LIFE_DESIRE}
    [/specials]
        [/effect]

    [/object]

#ЗАДАНИЯ

[/event]

#МЕХАНИКА ПЕРВОГО БОССА

[event]
name=moveto
first_time_only=no

    [filter]
    id=Challenger_Crossbow
    [/filter]
    [if]
    [have_unit]
    id=Bastard
    [filter_location]
    x,y=$unit.x,$unit.y
    radius=1
    [/filter_location]
    [/have_unit]
        [then]
        [/then]

        [else]
        [animate_unit]
        flag=attack
        [filter]
        id=Challenger_Crossbow
        [/filter]
        [primary_attack]
        name=crossbow
        type=pierce
        [/primary_attack]
        hits=yes
        text=_ "CROSSBOW!"
        with_bars=yes
       [/animate_unit]
        [harm_unit]
            [filter]
                id=Bastard
            [/filter]
            [filter_second]
                id=Challenger_Crossbow
            [/filter_second]
            amount=30
            experience=no
            fire_event=yes
            animate=defender
            kill=yes
        [/harm_unit]
        [/else]
        [/if]
    [/event]

    [event]
    name=die

        [filter]
        id=Challenger_Crossbow
        [/filter]
        [store_locations]
        x,y=$x1,$y1
        variable=CrossbowDead
        [/store_locations]

        {PLACE_IMAGE "units/orcs/grunt-die-8.png~RC(magenta>brown)" $CrossbowDead.x $CrossbowDead.y}

        [message]
        speaker=Bastard
        message= _"One sneaky bastard's dead. Bring in the next one!"
        [/message]

        {TELEPORT_UNIT id=Bastard 5 9}

        [modify_unit]
        [filter]
        id=Bastard
        [/filter]
        facing=ne
        [/modify_unit]

    [hide_unit]
    side=1
    [/hide_unit]
    [hide_unit]
    side=3
    [/hide_unit]

    {FADE_TO_BLACK}

    [heal_unit]
    [filter]
    id=Bastard
    [/filter]
    amount=full
    [/heal_unit]

    [unit]
    side=2
    type=Orcish Warrior Fighting
    name="Rebel Challenger"
    id=Challenger_Sword
    x,y=15,4
    random_traits=no
    [modifications]
    {TRAIT_LOYAL_HERO}
    [/modifications]
    hidden=no
    [/unit]
    [unhide_unit]
    side=1
    [/unhide_unit]
    [unhide_unit]
    side=3
    [/unhide_unit]

    {FADE_IN}

    [message]
    speaker=Kaah
    message= _"Challenger! Enter the arena."
    [/message]


    {MOVE_UNIT id=Challenger_Sword 11 6}

    [message]
    speaker=Challenger_Sword
    message= _"I regret being too wounded after the war when ugly Mug stole victory from Bagul. But now I'm healed and ready to right the wrong.  A bastard should not rule the orcs. Listen to me, Mug! I'll slaughter you in a straight fight like a real orc and become a chief!"
    [/message]
    [message]
    speaker=Bastard
    message= _"You've been cured since winter, but got so brave when I lost my arm? Hating your kind will help me win even without an arm."
    [/message]
    [message]
    speaker=Kaah
    message= _"The spirits of war are watching you, warriors. May the steel choose our strongest chief!"
    [/message]
    [message]
    speaker=Mursha
    message= _"The warrior challanger is famous for his brutal executions. If you are badly wounded, he will perform a crushing blow with his second sword. Fight for your life, don't let him maim you!"
    [/message]

    [micro_ai]
            side=2
            ai_type=coward
            action=delete
    [/micro_ai]
    [micro_ai]
            side=2
            ai_type=simple_attack
            action=add
            ca_score=800000
            [filter]
                id=Challenger_Sword
            [/filter]
            [filter_second]
            id=Bastard
            [/filter_second]
    [/micro_ai]
    [/event]

#МЕХАНИКА ВТОРОГО БОССА

[event]
        name=attacker hits
        first_time_only=no

        [filter]
        id=Challenger_Sword
        [/filter]
        [filter_second]
            id=Bastard
            formula="if(self.hitpoints <= 70, 40, 0)"
        [/filter_second]
        [animate_unit]
        flag=attack
        [filter]
        id=Challenger_Sword
        [/filter]
        [primary_attack]
        name=greatsword
        [/primary_attack]
        hits=yes
        text=_ "EXECUTIVE STRIKE"
        with_bars=yes
       [/animate_unit]
        [harm_unit]
            [filter]
                id=Bastard
            [/filter]
            [filter_second]
                id=Challenger_Crossbow
            [/filter_second]
            amount=15
            experience=no
            fire_event=yes
            animate=defender
            kill=yes
        [/harm_unit]

[/event]
 [event]
    name=die

        [filter]
        id=Challenger_Sword
        [/filter]
        [store_locations]
        x,y=$x1,$y1
        variable=SwordDead
        [/store_locations]

        {PLACE_IMAGE "units/orcs/grunt-die-8.png~RC(magenta>brown)" $SwordDead.x $SwordDead.y}

        [message]
        speaker=Bastard
        message= _"A real orc, ugh. Bullshit. I'm stronger even by your stupid rules."
        [/message]
        [message]
        speaker=Kaah
        message= _"Orcs of the Coldblood Clan! Blood and Steel have made their choice! Moog the Terrible has confirmed his supremacy by the right of force!"
        [/message]
        [message]
        speaker=Kaah
        message= _"According to tradition, the bodies of the challengers..."
        [/message]
        [message]
        speaker=Bastard
        message= _"No, shaman. Orcs of the Coldblood Clan! Those rotten bastards thought I was weak and tried to defeat me in an unequal fight. Watch what happens to anyone who tries to take advantage of my injury!"
        [/message]
        [message]
        speaker=Bastard
        message= _"Ogres, eat the bodies!"
        [/message]

        {MOVE_UNIT role=eater1 $CrossbowDead.x $CrossbowDead.y}
        {MOVE_UNIT role=eater2 $SwordDead.x $SwordDead.y}

        [sound]
        name=ogre-die-2.ogg
        [/sound]

        {FADE_TO_BLACK}
        [hide_unit]
        side=1
        [/hide_unit]
        [hide_unit]
        side=3
        [/hide_unit]
        [sound]
        name=bite.ogg
        [/sound]
        [sound]
        name=bite.ogg
        [/sound]
        [delay]
        time=600
        [/delay]
        [sound]
        name=bite-small.ogg
        [/sound]
        [sound]
        name=bite.ogg
        [/sound]
        [delay]
        time=600
        [/delay]
        [sound]
        name=bite-small.ogg
        [/sound]
        [sound]
        name=bite.ogg
        [/sound]
        [delay]
        time=600
        [/delay]
        [sound]
        name=bite-small.ogg
        [/sound]
        [sound]
        name=bite.ogg
        [/sound]
          [sound]
        name=bite.ogg
        [/sound]
        [sound]
        name=bite.ogg
        [/sound]
        [delay]
        time=600
        [/delay]
        [sound]
        name=bite-small.ogg
        [/sound]
        [sound]
        name=bite.ogg
        [/sound]
        [delay]
        time=600
        [/delay]
        [sound]
        name=bite-small.ogg
        [/sound]
        [sound]
        name=bite.ogg
        [/sound]
        [delay]
        time=600
        [/delay]
        [sound]
        name=bite-small.ogg
        [/sound]
        [sound]
        name=bite.ogg
        [/sound]

        [sound]
        name=ogre-die-1.ogg
        [/sound]

        {REMOVE_IMAGE $CrossbowDead.x $CrossbowDead.y}
        {REMOVE_IMAGE $SwordDead.x $SwordDead.y}

        {PLACE_IMAGE "items/bones.png" $CrossbowDead.x $CrossbowDead.y}
        {PLACE_IMAGE "items/bones.png" $SwordDead.x $SwordDead.y}


        {CLEAR_VARIABLE CrossbowDead}
        {CLEAR_VARIABLE SwordDead}

        [unhide_unit]
        side=1
        [/unhide_unit]
        [unhide_unit]
        side=3
        [/unhide_unit]

        {FADE_IN}

        {MOVE_UNIT role=eater1 3 9}
        {MOVE_UNIT role=eater2 4 10}

        [message]
        speaker=narrator
        message= _"The entire clan was watching what was happening. If the goblins' faces showed only disgust-they were never going to overthrow Mug, - the big orcs' eyes flashed with fear. They took the hint."
        [/message]
        [message]
        speaker=Bastard
        message= _"Our clan has endured the tyranny of such bastards all our lives. They thought they were better than the others, and they humiliated me. They talk about strength and tradition, but only attacked me when I lost my arm."
        [/message]
        [message]
        speaker=Bastard
        message= _"Today you saw the truth. I am your leader, and the bodies of these cowardly creatures will soon turn to ogre shit. I do not seek to torture and humiliate you. But I will not spare those who try to stab me in the back. Now go! And mark my words. "
        [/message]

        [endlevel]
        result=victory
        [/endlevel]
        [/event]








#КРОВИЩА

[event]
name=attacker hits
id=rage_blood1
first_time_only=no
[filter_second]
[not]
    [filter_wml]
        [status]
            not_living="yes"
        [/status]
    [/filter_wml]
[/not]
[/filter_second]

{VARIABLE_OP bleedchance rand 0,0,1}

{IF_VAR bleedchance equals 1 (
[then]

{VARIABLE_OP blood_imagemod rand "","~FL(horiz)"}
{RANDOM 1..5}
{PLACE_IMAGE "scenery/blood-$random|.png$blood_imagemod" $x1 $y1}

[/then]
)}

[/event] 
[event]
name=defender hits
id=rage_blood2
first_time_only=no
[filter]
[not]
    [filter_wml]
        [status]
            not_living="yes"
        [/status]
    [/filter_wml]
[/not]
[/filter]


{VARIABLE_OP bleedchance rand 0,0,1}

{IF_VAR bleedchance equals 1 (
[then]

{VARIABLE_OP blood_imagemod rand "~SCALE(60,60)","~SCALE(60,60)~FL(horiz)"}
{RANDOM 1..5}
{PLACE_IMAGE "scenery/blood-$random|.png$blood_imagemod" $x1 $y1}

[/then]
)}

[/event]

[event]
name=die
id=rage_blood3
first_time_only=no

[filter]
[not]
    [filter_wml]
        [status]
            not_living="yes"
        [/status]
    [/filter_wml]
[/not]
[/filter]

{VARIABLE_OP blood_imagemod rand "","~FL(horiz)"}

{RANDOM 1..5}
{PLACE_IMAGE "scenery/blood-$random|.png$blood_imagemod" $x1 $y1}

[/event]

[/scenario]
